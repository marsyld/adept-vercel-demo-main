import type { NextApiRequest, NextApiResponse } from 'next'; let store:any = (global as any)._BYUTICH_STORE || ((global as any)._BYUTICH_STORE = { rows: [] }); export default function handler(req:NextApiRequest,res:NextApiResponse){ if(!req.headers.authorization) return res.status(401).json({error:'unauthorized'}); if(req.method==='POST'){ const id='a_'+Math.random().toString(36).slice(2,10); const row={id,status:'created',created_at:new Date().toISOString(),assets:{}}; store.rows.unshift(row); return res.status(201).json(row); } if(req.method==='GET'){ return res.json(store.rows); } res.status(405).end(); }