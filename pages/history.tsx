import { useEffect, useState } from 'react'; type Row={id:string;status:string;created_at:string}; export default function History(){ const [rows,setRows]=useState<Row[]>([]); useEffect(()=>{ (async()=>{ const r=await fetch('/api/analyses',{headers:{'Authorization':'Bearer '+localStorage.getItem('token')}}); const j=await r.json(); setRows(j||[]); })(); },[]); return (<main style={{maxWidth:960,margin:'40px auto',padding:'0 20px'}}><h1>Мои анализы</h1><table style={{width:'100%',borderCollapse:'collapse',marginTop:12}}><thead><tr><th align='left'>ID</th><th>Статус</th><th>Создан</th><th/></tr></thead><tbody>{rows.map(r=>(<tr key={r.id} style={{borderTop:'1px solid #e5e7eb'}}><td>{r.id}</td><td>{r.status}</td><td>{new Date(r.created_at).toLocaleString()}</td><td><a href={'/report/'+r.id}>Открыть</a></td></tr>))}</tbody></table></main>); }